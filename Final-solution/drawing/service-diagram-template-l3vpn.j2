#jinja2: lstrip_blocks: True
// This is diagram automatically generated by Ansible and Jinja2
//
//
//
//


graph {
	splines = ortho
	{% set vrfname = item.keys()[0] %}
		vrf{{ vrfname }}[style="filled",fillcolor="blue",fontcolor="white",shape="box"]
		{# Loop for sites in l3vpn #}
		{% for site in item.values()[0].list_of_sites %}
		{# Loop for nodes in sites #}
		{% for node in site.nodes %}
		{{ node.name }} -- vrf{{ vrfname }};
	   	{# Loop for interface in nodes #}
		{% for intf in node.interfaces %}
		{% if intf.interface is defined %}
		{% set subnet = intf.ip ~ '/' ~ intf.mask %}
		{% if intf.vrrp_ip is defined %}
		{{ node.name }} -- "{{ intf.vrrp_ip }}"[label="{{ intf.interface }}\n{{ intf.ip }}"];
		"{{ intf.vrrp_ip }}" -- "{{ subnet | ipaddr('0') }}";
		{% else %}
		{{ node.name }} -- "{{ subnet | ipaddr() }}"[label="{{ intf.interface }}"];
		{% endif %}
		{% endif %}
		{% endfor %}
		{% endfor %}
		{% endfor %}
}